<div class="container">

    <div class="row" data-bind="with: user">
        <div class="col-xs-12 col-md-6">
            <div data-bind="template: { name: 'user_template', data: $parent.user }"></div>
        </div>
    </div>    

    <div class="row" data-bind="with: restaurant">
        <div class="col-xs-12 col-md-6">
            <div data-bind="template: { name: 'restaurant_template', data: $parent.restaurant }"></div>
        </div>
    </div>


    <%= render 'shared/restaurant_template' %>
    <%= render 'shared/user_template' %>
    <%= render 'shared/restaurant_javascript' %>

    <script type='text/javascript'>//<![CDATA[ 

        var resto_data = <%= raw(current_user.owns_restaurants.as_json.to_json) %>;
        var user_data = <%= raw(current_user.as_json.to_json) %>;

        function User(data) {
            var self = this;
            self.id = data._id;
            self.email = ko.observable(data.email);

        }    

        function viewModel() {
            var self = this;
            self.restaurant = ko.observable(new Restaurant(resto_data));
            self.user = ko.observable(new User(user_data))     
        };

        ko.applyBindings(new viewModel());


    //]]>  
    </script>    

</div>