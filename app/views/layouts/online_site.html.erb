<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title></title>
		<meta name="description" content="Official Homepage of <%= @resto_data['name'] %>.">
		<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, minimal-ui" />
		<meta name="fragment" content="!" />
		<meta name="format-detection" content="telephone=no">
 		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<script type="text/javascript"> 
			var $buoop = {vs:{i:9,f:15,o:15,s:5.1,n:9}}; 
			$buoop.ol = window.onload; 
			window.onload=function(){ 
				 try {if ($buoop.ol) $buoop.ol();}catch (e) {} 
				 var e = document.createElement("script"); 
				 e.setAttribute("type", "text/javascript"); 
				 e.setAttribute("src", "//browser-update.org/update.js"); 
				 document.body.appendChild(e); 
			} 
		</script> 

		<style type="text/css">
			.loading_widget {
				position: fixed;
				top: 0;
				bottom: 0;
				z-index: 9999;
				left: 0;
				right: 0;
				background: black;
				color: #fff;
			}

			.loading_widget_middle {
				position: absolute;
				top: 50%;
				left: 50%;
			  	-webkit-transform:  translate(-50%,-50%);
				-moz-transform:     translate(-50%,-50%);
				-ms-transform:      translate(-50%,-50%);
				-o-transform:       translate(-50%,-50%);  
				transform:          translate(-50%,-50%);
			}

			.css_spinner {
			  margin: 100px auto;
			  width: 50px;
			  height: 30px;
			  text-align: center;
			  font-size: 10px;
			}

			.css_spinner > div {
			  background-color: #333;
			  height: 100%;
			  width: 6px;
			  display: inline-block;
			  
			  -webkit-animation: stretchdelay 1.2s infinite ease-in-out;
			  animation: stretchdelay 1.2s infinite ease-in-out;
			}

			.css_spinner .rect2 {
			  -webkit-animation-delay: -1.1s;
			  animation-delay: -1.1s;
			}

			.css_spinner .rect3 {
			  -webkit-animation-delay: -1.0s;
			  animation-delay: -1.0s;
			}

			.css_spinner .rect4 {
			  -webkit-animation-delay: -0.9s;
			  animation-delay: -0.9s;
			}

			.css_spinner .rect5 {
			  -webkit-animation-delay: -0.8s;
			  animation-delay: -0.8s;
			}

			@-webkit-keyframes stretchdelay {
			  0%, 40%, 100% { -webkit-transform: scaleY(0.4) }  
			  20% { -webkit-transform: scaleY(1.0) }
			}

			@keyframes stretchdelay {
			  0%, 40%, 100% { 
			    transform: scaleY(0.4);
			    -webkit-transform: scaleY(0.4);
			  }  20% { 
			    transform: scaleY(1.0);
			    -webkit-transform: scaleY(1.0);
			  }
			}
		</style>

	    <%= raw(@font_link_data) %>

		<%= stylesheet_link_tag "online_site", type: 'text/css'%>
		<%= javascript_include_tag "application" %>

		<!--[if lt IE 9]>
			<script src="https://css3-mediaqueries-js.googlecode.com/files/css3-mediaqueries.js"></script>
			<script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->	
	</head>
    <body>
    	<div style="display: none;" data-bind="visible: true">
			<style type='text/css'>

				<%= raw(@design_css) %>
				<%= raw(@design_menu_css) %>
				<%= raw(@font_css) %>

			</style>    	
			<div data-bind="with: design">
				<!-- ko foreach: global_images -->
					<style data-bind="html: css" type='text/css'></style>
				<!-- /ko -->		  	
			</div>
			<div class="overlay"></div>  
			<div class="background_mobile"></div>  
			<nav id="navigation_small" class="nav">
				<ul>
					<li class="icon" data-bind="click: display_menu_toggle"><i class="fa fa-bars"></i></li>
					<div data-bind="visible: display_menu">
						<li><a data-bind="click: function() { goto_and_kill_menu('menu') }">Menu</a></li>
						<li><a data-bind="click: function() { goto_and_kill_menu('contact') }">Contact</a></li>
						<!-- ko foreach: restaurant().pages -->
							<li><a data-bind="click: function() { $parent.goto_and_kill_menu($data.name()['en']) }, lText: name"></a></li>
						<!-- /ko -->					
						<div class="language_select" data-bind="foreach: languages">
							<li data-bind="css:{selected: $data === $root.lang()}, click: function(){ $root.lang($data); $root.display_menu(false) }"><a data-bind="text: $root.getFullLangName($data)"></a>
						</div>						
					</div>
				</ul>		
			</nav>			  	
			<div id="left_menu">
				<div class="restaurant_name" data-bind="with: restaurant">
					<!-- ko if: logo_settings().showLogo -->
						<img id="logo_image" data-bind="attr: {src:logo().url}, style: { 'height': logo_settings().image_height() + 'px', 'borderRadius':logo_settings().border_radius() + 'px', 'borderWidth':logo_settings().border_size() + 'px', 'borderColor': '#' + logo_settings().border_color()}" style="border-style: solid"/>
					<!-- /ko -->
					<!-- ko if: !logo_settings().showLogo() -->
						<span class="logo" data-bind="text: name, fitText: !logo_settings().logo_as_image"><%= @resto_data["name"] %></span>
					<!-- /ko -->					
				</div>
				<nav id="navigation" class="nav">
					<ul>
						<!-- ko foreach: restaurant().pages -->
							<li><a data-bind="page-href: $data.name()['en'], lText: name"></a></li>
						<!-- /ko -->					
					</ul>
				</nav>	
				<div id="social_media" class="social_media" data-bind="with: restaurant">
					<a data-bind="visible: socialVisible('facebook'), attr:{href: facebook}"><i class="fa fa-facebook-square"></i></a>
					<a data-bind="visible: socialVisible('twitter'), attr:{href: twitter}"><i class="fa fa-twitter-square"></i></a>			
					<a data-bind="visible: socialVisible('instagram'), attr:{href: instagram}"><i class="fa fa-instagram"></i></a>
				</div>
				<div class="main_page_language_selector">
					<ul class="language_select">
						<li><a data-bind="page-href: 'menu', lText: menu_tr">Menu</a></li>
						<li><a data-bind="page-href: 'contact', lText: contact_tr">Contact</a></li>					
					  	<!-- ko foreach: languages -->
					  		<li data-bind="css:{selected: $data === $root.lang()}, click: function(){ $root.lang($data) }"><span data-bind="text: $root.getFullLangName($data)"></span></li>
					  	<!-- /ko -->
					</ul>
				</div>	
				<div data-bind="style:{backgroundImage: $root.computeImage('header_background_pattern')}" class="pattern_background"></div>					
			</div>

			<div id="footer" data-bind="fadeVisible: !atTop()">	
				<div id="opened_or_closed_footer" data-bind="with: restaurant, click: function() { goto_and_kill_menu('contact') }">
					<h4 data-bind="visible: showHourSign"><span class="currently_open_tag"  data-bind="lStaticText: 'currently'"> </span><span class="currently_open" data-bind="css:{'hours_opened':areWeOpened(),'hours_closed':!areWeOpened()}, lStaticText: areWeOpenedText"></span></h4>
				</div>				
				<div id="social_media_footer" class="social_media" data-bind="with: restaurant">
					<a data-bind="visible: socialVisible('facebook'), attr:{href: facebook}"><i class="fa fa-facebook-square"></i></a>
					<a data-bind="visible: socialVisible('twitter'), attr:{href: twitter}"><i class="fa fa-twitter-square"></i></a>			
					<a data-bind="visible: socialVisible('instagram'), attr:{href: instagram}"><i class="fa fa-instagram"></i></a>
				</div>	
				<div data-bind="style:{backgroundImage: $root.computeImage('header_background_pattern')}" class="pattern_background"></div>
				<div class="powered_by_dishgo"><a href="https://dishgo.io" id="dishgo_logo"></a></div>			
			</div>

			<div id="opened_or_closed" data-bind="with: restaurant">
				<h4 data-bind="visible: showHourSign"><span class="currently_open_tag">currently </span><span class="currently_open" data-bind="css:{'hours_opened':areWeOpened(),'hours_closed':!areWeOpened()}, text: areWeOpenedText"></span></h4>
			</div>	

			<!-- ko foreach: restaurant().pages -->
				<div data-bind="page: {id: $data.name()['en'], title: $root.restaurant().name()}" class="pages">
					<div class="content_wrapper">				
						<%= render 'start' %>
					</div>							
				</div>
			<!-- /ko -->

			<div data-bind="page: {id: 'contact', title: 'Contact', afterShow: function(){ ko['reloadMap'](true) }}" class="pages">				
				<%= render 'contact' %>														
			</div>


			<div data-bind="page: {id: 'menu', title: 'Menu', afterShow: function(){ ko['menuVisible'](true); pauseCarousel(); }, afterHide: function(){ ko['menuVisible'](false); playCarousel(); }}" class="pages">
				<%= yield %>
			</div>	

	    	<%= javascript_include_tag "menu_editor" %>

			<%= render 'javascript_ignition' %>
		</div>
    	<div class="loading_widget" data-bind="visible: loading">
    		<div class="loading_widget_middle" style="text-align: center">
				<div class="css_spinner">
				  <div class="rect1"></div>
				  <div class="rect2"></div>
				  <div class="rect3"></div>
				  <div class="rect4"></div>
				  <div class="rect5"></div>
				</div>
    			<h4>LOADING</h4>
    		</div>
    	</div>		
    </body>
</html>
